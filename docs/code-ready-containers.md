## Testing the Operator with Code Ready Containers

In this version of the operator, OpenShift testing is accomplished using Code Ready Containers (CRC): https://developers.redhat.com/products/codeready-containers/overview. The testing was performed on Ubuntu 18.04. This short README documents a couple of notes regarding CRC on Ubuntu.

Getting CRC to install successfully on Ubuntu requires manual intervention in the networking configuration as part of the CRC installation process. Presently, for me, I work around this by configuring my etc/hosts with certain entries - shown below - to support testing.

Specifically, note the `nuxeo-server.apps-crc.testing` host name - which maps to an OpenShift *Route* generated by the Operator in the testing scenario documented in the main README.

```shell
192.168.130.1   crc.testing
192.168.130.11  api.crc.testing
192.168.130.11  apps-crc.testing
192.168.130.11  foo.apps-crc.testing
192.168.130.11  oauth-openshift.apps-crc.testing
192.168.130.11  default-route-openshift-image-registry.apps-crc.testing
192.168.130.11  nuxeo-server.apps-crc.testing
192.168.130.11  console-openshift-console.apps-crc.testing
```

The IP addresses shown above are hard-coded in the CRC binary for the CRC version shown below, and with the corresponding CRC configuration settings:

```shell
$ ./crc version
crc version: 1.9.0+a68b5e0
OpenShift version: 4.3.10 (embedded in binary)
$ ./crc config view
- skip-check-crc-dnsmasq-file           : true
- skip-check-network-manager-config     : true
- skip-check-network-manager-installed  : true
- skip-check-network-manager-running    : true
```

In addition, configure the Docker registry for insecure access to the OpenShift integrated image registry.

```shell
$ sudo cat /etc/docker/daemon.json
{
    "insecure-registries" : ["default-route-openshift-image-registry.apps-crc.testing"]
}
```

And finally, ensure you're logged in to the cluster as `kubeadmin`:

```shell
$ oc status
In project default on server https://api.crc.testing:6443
...
$ oc whoami
kube:admin
```

