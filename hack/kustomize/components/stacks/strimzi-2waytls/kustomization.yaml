namespace: backing

bases:
- ../../namespace
- ../../strimzi
- ../../nuxeo

resources:
- kafkauser.yaml

patchesJson6902:
- target:
    group: kafka.strimzi.io
    version: v1beta1
    kind: Kafka
    name: strimzi
  patch: |-
    - op: replace
      path: /spec/kafka/listeners
      value:
        tls:
          authentication:
            type: tls
- target:
    group: nuxeo.com
    version: v1alpha1
    kind: Nuxeo
    name: nuxeo
  patch: |-
    - op: add
      path: /spec/backingServices
      value:
      - preConfigured:
          type: Strimzi
          resource: strimzi
          settings:
            auth: tls
            user: nuxeo-kafka-user
